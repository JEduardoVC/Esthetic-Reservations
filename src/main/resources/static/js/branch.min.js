var map;async function mostrarBranch(){try{const e=await fetch("/api/branch/all",{method:"GET"});if((await e.json()).content.forEach(e=>{let{location:n,branchName:t}=e,{email:a,name:o,lastName:c}=e.owner;const s=document.querySelector("#sucursal"),r=document.createElement("div");r.className="sucursal-contenido";const l=document.createElement("div");l.className="nombre";const i=document.createElement("div");i.id="info",i.className="info";const d=document.createElement("h1");d.textContent=t,l.appendChild(d),r.appendChild(l),i.innerHTML=`\n                <p>Nombre de la encargada: <span>${o} ${c}</span></p>\n                <p>Email: <span>${a}</span></p>\n                <p>Direccion: <span>${n}</span></p>\n            `;const m=document.createElement("div");m.id="seleccionar",m.className="seleccionar-no-sucursal";const u=document.createElement("form");u.action="/app/client",u.method="GET";const p=document.createElement("button");p.className="btn-secundario",p.textContent="Seleccionar",p.type="button",u.appendChild(p),m.appendChild(u),i.appendChild(m),r.appendChild(i);const h=document.createElement("div");h.className="mapa",map=new google.maps.Map(h,{center:{lat:21.14197073516805,lng:-100.31784830972968},zoom:15});new google.maps.Marker({position:{lat:21.14197073516805,lng:-100.31784830972968},map:map,title:t});r.appendChild(h),s.appendChild(r)}),getCookie()){const e=readCookie("userId"),n=readCookie("token"),t=new Headers;t.append("Authorization","Bearer "+n);const a=document.querySelector("#seleccionar"),o=await fetch("/api/user/"+e,{method:"GET",headers:t,redirect:"follow"}),c=await o.json(),{name:s,lastName:r}=c,l=document.querySelector("#nombreUsuario");a.classList.remove("seleccion-no-sucursal"),a.classList.add("seleccion-sucursal"),l.textContent=`${s} ${r}`;cambiarBtn()}else{const e=document.querySelector("#seleccionar");e.classList.add("seleccion-no-sucursal"),e.classList.remove("seleccion-sucursal")}}catch(e){console.error(e)}}function readCookie(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+e.replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function getCookie(){return 4==readCookie("rol")}function cambiarBtn(){const e=document.querySelector("#login");document.querySelector("#btn-login").classList.add("log-out");const n=document.createElement("a");return n.id="btn-cerrar-sesion",n.innerHTML='\n    <img class="login-img" src="/img/salir.webp">\n  ',e.appendChild(n),n}document.addEventListener("DOMContentLoaded",(function(){mostrarBranch()}));
//# sourceMappingURL=branch.js.map
