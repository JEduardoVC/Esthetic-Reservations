var map;async function mostrarBranch(){try{const e=await fetch("/api/branch/all",{method:"GET"});if((await e.json()).content.forEach(e=>{let{id:n,location:o,branchName:t}=e,{email:a,name:c,lastName:s}=e.owner;const r=document.querySelector("#sucursal"),l=document.createElement("div");l.className="sucursal-contenido";const i=document.createElement("div");i.className="nombre";const d=document.createElement("div");d.id="info",d.className="info";const m=document.createElement("h1");m.textContent=t,i.appendChild(m),l.appendChild(i),d.innerHTML=`\n                <p>Nombre de la encargada: <span>${c} ${s}</span></p>\n                <p>Email: <span>${a}</span></p>\n                <p>Direccion: <span>${o}</span></p>\n            `;const u=document.createElement("div");u.id="seleccionar",u.className="seleccionar-no-sucursal";const p=document.createElement("form");p.action="/app/client",p.method="GET";const h=document.createElement("button");h.className="btn-secundario",h.textContent="Seleccionar",h.type="button",h.id="seleccion-sucursal",h.name=n,p.appendChild(h),u.appendChild(p),d.appendChild(u),l.appendChild(d);const g=document.createElement("div");g.className="mapa",map=new google.maps.Map(g,{center:{lat:21.14197073516805,lng:-100.31784830972968},zoom:15});new google.maps.Marker({position:{lat:21.14197073516805,lng:-100.31784830972968},map:map,title:t});l.appendChild(g),r.appendChild(l)}),getCookie()){const e=readCookie("userId"),n=readCookie("token"),o=new Headers;o.append("Authorization","Bearer "+n);const t=document.querySelector("#seleccionar"),a=await fetch("/api/user/"+e,{method:"GET",headers:o,redirect:"follow"}),c=await a.json(),{name:s,lastName:r}=c,l=document.querySelector("#nombreUsuario");t.classList.remove("seleccion-no-sucursal"),t.classList.add("seleccion-sucursal"),l.textContent=`${s} ${r}`,cambiarBtn()}else{const e=document.querySelector("#seleccionar");e.classList.add("seleccion-no-sucursal"),e.classList.remove("seleccion-sucursal")}}catch(e){console.error(e)}}function readCookie(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+e.replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function getCookie(){return 4==readCookie("rol")}function cambiarBtn(){document.querySelector("#login").classList.toggle("log-out");document.querySelector("#logout").classList.toggle("login")}document.addEventListener("DOMContentLoaded",(function(){mostrarBranch()}));
//# sourceMappingURL=branch.js.map
