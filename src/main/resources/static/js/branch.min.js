var map;async function mostrarBranch(){try{const e=await fetch("/api/branch/all",{method:"GET"}),n=await e.json(),t=getCookie();if(n.content.forEach(e=>{let{location:n,branchName:t}=e,{email:o,name:a,lastName:c}=e.owner;const r=document.querySelector("#sucursal"),s=document.createElement("div");s.className="sucursal-contenido";const i=document.createElement("div");i.className="nombre";const l=document.createElement("div");l.id="info",l.className="info";const d=document.createElement("h1");d.textContent=t,i.appendChild(d),s.appendChild(i),l.innerHTML=`\n                <p>Nombre de la encargada: <span>${a} ${c}</span></p>\n                <p>Email: <span>${o}</span></p>\n                <p>Direccion: <span>${n}</span></p>\n            `;const m=document.createElement("div");m.id="seleccionar",m.className="seleccionar-no-sucursal";const p=document.createElement("form");p.action="/app/client",p.method="GET";const u=document.createElement("button");u.className="btn-secundario",u.textContent="Seleccionar",u.type="button",p.appendChild(u),m.appendChild(p),l.appendChild(m),s.appendChild(l);const h=document.createElement("div");h.className="mapa",map=new google.maps.Map(h,{center:{lat:21.14197073516805,lng:-100.31784830972968},zoom:15});new google.maps.Marker({position:{lat:21.14197073516805,lng:-100.31784830972968},map:map,title:t});s.appendChild(h),r.appendChild(s)}),t){const e=readCookie("userId"),n=readCookie("token"),t=new Headers;t.append("Authorization","Bearer "+n);const o=document.querySelector("#seleccionar"),a=await fetch("/api/user/"+e,{method:"GET",headers:t,redirect:"follow"}),c=await a.json(),{name:r,lastName:s}=c,i=document.querySelector("#nombreUsuario");o.classList.remove("seleccion-no-sucursal"),o.classList.add("seleccion-sucursal"),i.textContent=`${r} ${s}`;cambiarBtn().addEventListener("click",(function(){console.log("Se clickeo el cerrar sesion")}))}}catch(e){console.error(e)}}function readCookie(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+e.replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function getCookie(){return 4==readCookie("rol")}function cambiarBtn(){const e=document.querySelector("#login");document.querySelector("#btn-login").classList.add("log-out");const n=document.createElement("a");return n.href="/",n.id="btn-cerrar-sesion",n.innerHTML='\n    <img class="login-img" src="/img/salir.webp">\n  ',e.appendChild(n),n}document.addEventListener("DOMContentLoaded",(function(){mostrarBranch()}));
//# sourceMappingURL=branch.js.map
