var map;async function mostrarBranch(){try{const e=await fetch("/api/branch/all",{method:"GET"});if((await e.json()).content.forEach(e=>{let{id:n,location:t,branchName:a}=e,{email:o,name:c,lastName:s}=e.owner;const r=document.querySelector("#sucursal"),l=document.createElement("div");l.className="sucursal-contenido";const i=document.createElement("div");i.className="nombre";const d=document.createElement("div");d.id="info",d.className="info";const m=document.createElement("h1");m.textContent=a,i.appendChild(m),l.appendChild(i),d.innerHTML=`\n                <p>Nombre de la encargada: <span>${c} ${s}</span></p>\n                <p>Email: <span>${o}</span></p>\n                <p>Direccion: <span>${t}</span></p>\n            `;const u=document.createElement("div");u.id="seleccionar",u.className="seleccionar-no-sucursal";const p=document.createElement("form");p.action="/app/client",p.method="GET";const h=document.createElement("button");h.className="btn-secundario",h.textContent="Seleccionar",h.type="button",h.id="seleccion-sucursal",h.name=n,p.appendChild(h),u.appendChild(p),d.appendChild(u),l.appendChild(d);const g=document.createElement("div");g.className="mapa",map=new google.maps.Map(g,{center:{lat:21.141970735168,lng:-100.31784830972968},zoom:15});new google.maps.Marker({position:{lat:21.14197073516805,lng:-100.31784830972968},map:map,title:a});l.appendChild(g),r.appendChild(l),h.addEventListener("click",seleccionarBranch)}),isUser()){const e=sessionStorage.getItem("userId"),n=sessionStorage.getItem("token"),t=new Headers;t.append("Authorization","Bearer "+n);const a=document.querySelector("#seleccionar"),o=await fetch("/api/user/"+e,{method:"GET",headers:t,redirect:"follow"}),c=await o.json(),{name:s,lastName:r}=c,l=document.querySelector("#nombreUsuario");a.classList.remove("seleccion-no-sucursal"),a.classList.add("seleccion-sucursal"),l.textContent=`${s} ${r}`,cambiarBtn()}else{const e=document.querySelector("#seleccionar");e.classList.add("seleccion-no-sucursal"),e.classList.remove("seleccion-sucursal")}}catch(e){console.error(e)}}function seleccionarBranch(e){window.sessionStorage.setItem("branchId",e.target.name),document.location="http://localhost:5500/app/client/dashboard"}function isUser(){return 4==sessionStorage.getItem("rol")}function cambiarBtn(){document.querySelector("#login").classList.toggle("log-out");document.querySelector("#logout").classList.toggle("login")}document.addEventListener("DOMContentLoaded",(function(){mostrarBranch()}));
//# sourceMappingURL=branch.js.map
