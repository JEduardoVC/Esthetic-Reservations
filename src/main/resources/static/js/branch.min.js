var map;async function mostrarBranch(){try{const e=await fetch("/api/branch/all",{method:"GET"});if((await e.json()).content.forEach(e=>{let{id:n,location:t,branchName:o}=e,{email:a,name:c,lastName:s}=e.owner;const l=document.querySelector("#sucursal"),r=document.createElement("div");r.className="sucursal-contenido";const i=document.createElement("div");i.className="nombre";const d=document.createElement("div");d.id="info",d.className="info";const m=document.createElement("h1");m.textContent=o,i.appendChild(m),r.appendChild(i),d.innerHTML=`\n                <p>Nombre de la encargada: <span>${c} ${s}</span></p>\n                <p>Email: <span>${a}</span></p>\n                <p>Direccion: <span>${t}</span></p>\n            `;const u=document.createElement("div");u.id="seleccionar",u.className="seleccionar-no-sucursal";const p=document.createElement("form");p.action="/app/client",p.method="GET";const h=document.createElement("button");h.className="btn-secundario",h.textContent="Seleccionar",h.type="button",h.id="seleccion-sucursal",h.name=n,p.appendChild(h),u.appendChild(p),d.appendChild(u),r.appendChild(d);const g=document.createElement("div");g.className="mapa",map=new google.maps.Map(g,{center:{lat:21.14197073516805,lng:-100.31784830972968},zoom:15});new google.maps.Marker({position:{lat:21.14197073516805,lng:-100.31784830972968},map:map,title:o});r.appendChild(g),l.appendChild(r),h.addEventListener("click",seleccionarBranch)}),getCookie()){const e=readCookie("userId"),n=readCookie("token"),t=new Headers;t.append("Authorization","Bearer "+n);const o=document.querySelector("#seleccionar"),a=await fetch("/api/user/"+e,{method:"GET",headers:t,redirect:"follow"}),c=await a.json(),{name:s,lastName:l}=c,r=document.querySelector("#nombreUsuario");o.classList.remove("seleccion-no-sucursal"),o.classList.add("seleccion-sucursal"),r.textContent=`${s} ${l}`,cambiarBtn()}else{const e=document.querySelector("#seleccionar");e.classList.add("seleccion-no-sucursal"),e.classList.remove("seleccion-sucursal")}}catch(e){console.error(e)}}function seleccionarBranch(e){document.cookie=`branchId=${e.target.name}; samesite=lax`,document.location="http://localhost:5500/app/client"}function readCookie(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+e.replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function getCookie(){return 4==readCookie("rol")}function cambiarBtn(){document.querySelector("#login").classList.toggle("log-out");document.querySelector("#logout").classList.toggle("login")}document.addEventListener("DOMContentLoaded",(function(){mostrarBranch()}));
//# sourceMappingURL=branch.js.map
