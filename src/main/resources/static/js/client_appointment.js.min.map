{"version":3,"sources":["client_appointment.js"],"names":["userId","sessionStorage","getItem","branchId","myHeaders","Headers","async","getAppointment","resultGetAppointment","fetch","method","headers","redirect","appointments","json","show_appointment","document","querySelector","forEach","appointment","id_branch","id_service","appointment_date","appointmnet_time","id","location","branchName","owner","name","services","service","service_name","newAppointment","createElement","innerHTML","appendChild","addEventListener","update","cancel","event","console","log","target","setItem","href","append"],"mappings":"AAAA,MAAMA,OAASC,eAAeC,QAAQ,UAChCC,SAAWF,eAAeC,QAAQ,YAClCE,UAAY,IAAIC,QAQtBC,eAAeC,iBACX,MAAMC,QAA6BC,MAAM,4BAA4BT,OAAU,CAACU,OAAQ,MAAOC,QAASP,UAAWQ,SAAU,WACvHC,QAAqBL,EAAqBM,OAC1CC,EAAmBC,SAASC,cAAc,gBAChDJ,EAAsB,QAAEK,QAAQC,IAC5B,MAAMC,UAACA,EAASC,WAAEA,EAAUC,iBAAEA,EAAgBC,iBAAEA,EAAgBC,GAAEA,GAAML,GAClEM,SAACA,EAAQC,WAAGA,EAAUC,MAAEA,GAASP,GACjCQ,KAACA,GAAQD,EACf,IAAIE,EAAW,GACfR,EAAWH,QAAQY,IACf,IAAIC,aAACA,GAAgBD,EACrBD,GAAY,yBAAyBE,aAEzC,MAAMC,EAAiBhB,SAASiB,cAAc,OAC9CD,EAAeE,UAAY,oCACFR,iDACCE,iDACAH,oDACGH,OAAsBC,2CAC/BM,qIAG2BL,WAAYA,uFACZA,WAAYA,sEAI3DT,EAAiBoB,YAAYH,GAC7BhB,SAASC,cAAc,eAAeO,GAAMY,iBAAiB,QAASC,QACtErB,SAASC,cAAc,eAAeO,GAAMY,iBAAiB,QAASE,UAI9E,SAASD,OAAOE,GACZC,QAAQC,IAAIF,EAAMG,OAAOd,MACzBJ,GAAKe,EAAMG,OAAOd,KAClB3B,eAAe0C,QAAQ,aAAcnB,IACrCC,SAASmB,KAAO,iCAEpB,SAASN,OAAOC,GACZf,GAAKe,EAAMG,OAAOd,KAClBY,QAAQC,IAAIF,EAAMG,OAAOd,MA/C7BxB,UAAUyC,OAAO,gBAAiB,UAAU5C,eAAeC,QAAQ,UAEnEc,SAASoB,iBAAiB,oBAAoB,WAC1C7B","file":"client_appointment.js","sourcesContent":["const userId = sessionStorage.getItem(\"userId\");\r\nconst branchId = sessionStorage.getItem(\"branchId\");\r\nconst myHeaders = new Headers();\r\n\r\nmyHeaders.append(\"Authorization\", `Bearer ${sessionStorage.getItem(\"token\")}` );\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    getAppointment();\r\n});\r\n\r\nasync function getAppointment() {\r\n    const resultGetAppointment = await fetch(`/api/appointment/usuario/${userId}`, {method: 'GET', headers: myHeaders, redirect: 'follow'});\r\n    const appointments = await resultGetAppointment.json();\r\n    const show_appointment = document.querySelector(\"#appointment\");\r\n    appointments[\"content\"].forEach(appointment => {\r\n        const {id_branch, id_service, appointment_date, appointmnet_time, id} = appointment;\r\n        const {location,  branchName, owner} = id_branch;\r\n        const {name} = owner;\r\n        let services = \"\";\r\n        id_service.forEach(service => {\r\n            let {service_name} = service;\r\n            services += `<br><span>&nbsp;&nbsp;${service_name}</span>`\r\n        })\r\n        const newAppointment = document.createElement(\"div\");\r\n        newAppointment.innerHTML = `\r\n            <p>Sucursal:<span> ${branchName}</span></p>\r\n            <p>Encargada:<span> ${name}</span></p>\r\n            <p>Ubicaci√≥n:<span> ${location}</span></p>\r\n            <p>Fecha y hora:<span> ${appointment_date} : ${appointmnet_time}</span></p>\r\n            <p>Servicios: ${services}</p>\r\n            <p>Status:<span> Pendiente</span></p>\r\n            <div>\r\n                <button type=\"button\" id=\"btn-update-${id}\" name=${id}>Editar reservacion</button>\r\n                <button type=\"button\" id=\"btn-cancel-${id}\" name=${id}>Cancelar</button>\r\n            </div>\r\n            <hr>\r\n        `;\r\n        show_appointment.appendChild(newAppointment);\r\n        document.querySelector(`#btn-update-${id}`).addEventListener(\"click\", update);\r\n        document.querySelector(`#btn-cancel-${id}`).addEventListener(\"click\", cancel);\r\n    });\r\n}\r\n\r\nfunction update(event){\r\n    console.log(event.target.name);\r\n    id = event.target.name;\r\n    sessionStorage.setItem(\"appoitment\", id);\r\n    location.href = `/app/client/appointment/update`;\r\n}\r\nfunction cancel(event){\r\n    id = event.target.name;\r\n    console.log(event.target.name);\r\n}"]}